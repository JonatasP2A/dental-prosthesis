### Dental Prosthesis Laboratory API - HTTP Client
### Use with REST Client extension (VS Code) or similar tools

@baseUrl = http://localhost:8080
@apiVersion = v1
@contentType = application/json

# Replace with your Clerk JWT token
@authToken = your-clerk-jwt-token-here


### ===========================================
### Health Check
### ===========================================

### Health Check - Public endpoint
GET {{baseUrl}}/health


### ===========================================
### Laboratory Endpoints
### ===========================================

### Create Laboratory
POST {{baseUrl}}/api/{{apiVersion}}/laboratories
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "name": "Dental Lab São Paulo",
  "email": "contact@dentallab-sp.com",
  "phone": "+5511999999999",
  "address": {
    "street": "Rua das Flores, 123",
    "city": "São Paulo",
    "state": "SP",
    "postal_code": "01234-567",
    "country": "Brazil"
  }
}

### Create Laboratory - Second Lab
POST {{baseUrl}}/api/{{apiVersion}}/laboratories
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "name": "Dental Lab Rio",
  "email": "contact@dentallab-rio.com",
  "phone": "+5521988888888",
  "address": {
    "street": "Av. Atlântica, 456",
    "city": "Rio de Janeiro",
    "state": "RJ",
    "postal_code": "22021-001",
    "country": "Brazil"
  }
}

### List All Laboratories
GET {{baseUrl}}/api/{{apiVersion}}/laboratories
Authorization: Bearer {{authToken}}

### Get Laboratory by ID
# Replace {id} with actual laboratory ID from create response
@laboratoryId = your-laboratory-id-here

GET {{baseUrl}}/api/{{apiVersion}}/laboratories/{{laboratoryId}}
Authorization: Bearer {{authToken}}

### Update Laboratory
PUT {{baseUrl}}/api/{{apiVersion}}/laboratories/{{laboratoryId}}
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "name": "Dental Lab São Paulo - Updated",
  "email": "updated@dentallab-sp.com",
  "phone": "+5511988887777",
  "address": {
    "street": "Rua das Flores, 456 - Sala 10",
    "city": "São Paulo",
    "state": "SP",
    "postal_code": "01234-567",
    "country": "Brazil"
  }
}

### Delete Laboratory (Soft Delete)
DELETE {{baseUrl}}/api/{{apiVersion}}/laboratories/{{laboratoryId}}
Authorization: Bearer {{authToken}}


### ===========================================
### Error Cases - For Testing
### ===========================================

### Create Laboratory - Missing Required Fields (should return 400)
POST {{baseUrl}}/api/{{apiVersion}}/laboratories
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "name": "",
  "email": "invalid-email",
  "phone": "",
  "address": {
    "street": "",
    "city": "",
    "state": "",
    "postal_code": "",
    "country": ""
  }
}

### Create Laboratory - Duplicate Email (should return 409)
# Run this after creating the first lab with the same email
POST {{baseUrl}}/api/{{apiVersion}}/laboratories
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "name": "Another Lab",
  "email": "contact@dentallab-sp.com",
  "phone": "+5511977777777",
  "address": {
    "street": "Rua Nova, 789",
    "city": "São Paulo",
    "state": "SP",
    "postal_code": "04567-890",
    "country": "Brazil"
  }
}

### Get Non-existent Laboratory (should return 404)
GET {{baseUrl}}/api/{{apiVersion}}/laboratories/non-existent-id
Authorization: Bearer {{authToken}}

### Update Non-existent Laboratory (should return 404)
PUT {{baseUrl}}/api/{{apiVersion}}/laboratories/non-existent-id
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "name": "Test Lab",
  "email": "test@lab.com",
  "phone": "+5511999999999",
  "address": {
    "street": "Test Street",
    "city": "Test City",
    "state": "SP",
    "postal_code": "01234-567",
    "country": "Brazil"
  }
}

### Delete Non-existent Laboratory (should return 404)
DELETE {{baseUrl}}/api/{{apiVersion}}/laboratories/non-existent-id
Authorization: Bearer {{authToken}}


### ===========================================
### Without Authentication - For Testing
### ===========================================

### List Laboratories without auth (should return 401 when auth is enabled)
GET {{baseUrl}}/api/{{apiVersion}}/laboratories

